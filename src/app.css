@import "./fonts.css";

/* --- Root Variables (Default Light Theme / Parchment) --- */
:root {
    /* Typography */
    --font-family-body: "IM Fell English", serif;
    --font-family-heading: "Uncial Antiqua", cursive;
    --font-mono: "IBM Plex Mono", monospace;

    /* Layout Spacing (Global) */
    /* Base size: 1rem is typically 16px */
    --space-xs: 0.25rem; /* 4px */
    --space-sm: 0.5rem; /* 8px */
    --space-md: 1rem; /* 16px */

    /* Global Defaults */
    --gallery-height: 300px;

    /* Colors */
    --color-background-primary: #fdf6e3;
    --color-background-secondary: #e6dcc9;
    --color-background-tertiary: #dcd3c3;
    --color-text-primary: #4a3f35;
    --color-text-secondary: #6a5f55;
    --color-text-heading: var(--color-text-secondary);
    --color-border-primary: #d3c7b3;
    --color-accent-primary: var(--color-text-secondary);
    --color-icons: var(--color-accent-primary);

    /* Semantic Colors */
    --color-text-link: #2563eb;
    --color-text-link-broken: #b04a4a;
    --color-text-error: #8b0000; /* darkred */
    --color-background-error: rgba(139, 0, 0, 0.1);
    --color-border-error: rgba(139, 0, 0, 0.2);

    /* UI Element Colors */
    --color-overlay-subtle: rgba(0, 0, 0, 0.02);
    --color-overlay-light: rgba(0, 0, 0, 0.03);
    --color-overlay-medium: rgba(0, 0, 0, 0.05);
    --color-overlay-dark: rgba(0, 0, 0, 0.07);
    --color-overlay-resizer: var(--color-overlay-subtle);
    --color-overlay-resizer-hover: var(--color-overlay-dark);

    /* UI Geometry */
    --radius-base: 4px;
    --select-arrow: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");

    /* --- SYNTAX HIGHLIGHTING (Default / Parchment) --- */
    --code-tag: #005f6a; /* Deep Teal Ink */
    --code-attribute: #a0522d; /* Sienna (Warm Brown) */
    --code-string: #556b2f; /* Dark Olive Green */
    --code-background-inline: var(--color-background-secondary);
}

/* --- Dark Mode Theme --- */
[data-theme="dark"] {
    --color-background-primary: #2a2a2e; /* Dark slate background */
    --color-background-secondary: #3a3a3e;
    --color-background-tertiary: #4a4a4e;
    --color-text-primary: #e0e0e0; /* Light chalk text */
    --color-text-secondary: #a0a0a0;
    --color-border-primary: #444448;
    --color-accent-primary: var(--color-text-secondary);

    --color-text-link: #60a5fa; /* Lighter blue for links */
    --color-text-link-broken: #fca5a5; /* Lighter red */
    --color-text-error: #ef4444; /* Bright red */
    --color-background-error: rgba(239, 68, 68, 0.1);
    --color-border-error: rgba(239, 68, 68, 0.2);

    --color-overlay-subtle: rgba(255, 255, 255, 0.02);
    --color-overlay-light: rgba(255, 255, 255, 0.03);
    --color-overlay-medium: rgba(255, 255, 255, 0.05);
    --color-overlay-dark: rgba(255, 255, 255, 0.07);

    /* Syntax Highlighting */
    --code-tag: #da70d6; /* Orchid/Amethyst (Purple stands out from Gold) */
    --code-attribute: #00ced1; /* Dark Turquoise (Gemstone Blue) */
    --code-string: #adff2f; /* Green-Yellow (Peridot - distinct brightness) */
}

[data-theme="burgundy"] {
    /* Keep the base parchment colors */
    --color-accent-primary: #8c2d2d; /* A deep burgundy for accents */
    --color-text-heading: #8c2d2d; /* Deep Burgundy */
    --font-family-heading: "Cinzel", serif;
}

[data-theme="slate-and-gold"] {
    /* Dark theme */
    --color-background-primary: #2a2a2e; /* Dark slate background */
    --color-background-secondary: #3a3a3e;
    --color-background-tertiary: #4a4a4e;
    --color-text-primary: #e0e0e0; /* Light chalk text */
    --color-text-secondary: #a0a0a0;
    --color-border-primary: #444448;

    --color-text-link: #60a5fa; /* Lighter blue for links */
    --color-text-link-broken: #fca5a5; /* Lighter red */
    --color-text-error: #ef4444; /* Bright red */
    --color-background-error: rgba(239, 68, 68, 0.1);
    --color-border-error: rgba(239, 68, 68, 0.2);

    --color-overlay-subtle: rgba(255, 255, 255, 0.02);
    --color-overlay-light: rgba(255, 255, 255, 0.03);
    --color-overlay-medium: rgba(255, 255, 255, 0.05);
    --color-overlay-dark: rgba(255, 255, 255, 0.07);

    /* Gold theme */
    --font-family-heading: "Cinzel", serif;
    --color-text-heading: #c5b358; /* A warm, desaturated gold */
    --color-accent-primary: #c5b358;

    /* Syntax Highlighting */
    --code-tag: #da70d6; /* Orchid/Amethyst (Purple stands out from Gold) */
    --code-attribute: #00ced1; /* Dark Turquoise (Gemstone Blue) */
    --code-string: #adff2f; /* Green-Yellow (Peridot - distinct brightness) */
}

/* --- Sci-Fi Hologram Theme --- */
[data-theme="hologram"] {
    --color-background-primary: #020a1f; /* Deep space blue */
    --color-background-secondary: #0d275a;
    --color-background-tertiary: #1a3a7a;
    --color-text-primary: #00fbfd; /* Glowing cyan */
    --color-text-secondary: #00a8aa;
    --color-border-primary: #1a568c;
    --color-accent-primary: var(--color-background-tertiary);

    --color-text-link: #39ff14; /* Neon green */
    --color-text-link-broken: #fffb00; /* Deep amber */
    --color-text-error: #ff5555; /* Glowing red */
    --color-background-error: rgba(255, 85, 85, 0.1);
    --color-border-error: rgba(255, 85, 85, 0.2);

    --color-overlay-subtle: rgba(0, 251, 253, 0.03);
    --color-overlay-light: rgba(0, 251, 253, 0.05);
    --color-overlay-medium: rgba(0, 251, 253, 0.07);
    --color-overlay-dark: rgba(0, 251, 253, 0.1);

    /* Syntax Highlighting */
    --code-tag: #d542ff;
    --code-attribute: #ffe600;
    --code-string: #ff5e78;
}

[data-theme="professional"] {
    /* --- Colors (Clean & Professional Palette) --- */
    --color-background-primary: #ffffff; /* Clean white background */
    --color-background-secondary: #f8f9fa; /* Very light grey for side panels */
    --color-background-tertiary: #e9ecef; /* Light grey for hover/active states */
    --color-text-primary: #212529; /* Dark charcoal for main text */
    --color-text-secondary: #6c757d; /* Muted grey for secondary text */
    --color-text-heading: var(
        --color-text-primary
    ); /* Headings use the main text color for a clean look */
    --color-border-primary: #dee2e6; /* Subtle border color */
    --color-accent-primary: #0d6efd; /* A professional blue for accents */

    /* --- Semantic Colors --- */
    --color-text-link: var(--color-accent-primary);
    /* Links use the accent color */
    --color-text-link-broken: #dc3545; /* A standard, clear red for broken links */
    --color-text-error: #dc3545; /* Standard "danger" red */
    --color-background-error: rgba(220, 53, 69, 0.1);
    --color-border-error: rgba(220, 53, 69, 0.2);

    /* Syntax Highlighting (Professional) */
    /* Concept: "GitHub Light" style. Clean and familiar. */
    --code-tag: #e45649; /* Soft Red */
    --code-attribute: #0184bc; /* Cerulean Blue (Crisp) */
    --code-string: #50a14f; /* Vivid Green */
}

[data-theme="paneidos"] {
    --color-background-primary: #eadcc5;
    --color-background-secondary: #ede0c6;
    --color-background-tertiary: #d3bd8c;
    --color-text-heading: #600000;
    --color-text-primary: #000000;
    --color-text-secondary: #3d2424;
    --color-border-primary: #300000;
    --color-accent-primary: #320606;
    --color-text-link: #c31d1d;
    --color-text-link-broken: #b04a4a;
    --color-text-error: #ff0000;
    --code-tag: #b58900;
    --code-attribute: #268bd2;
    --code-string: #2aa198;
}

/* Global Styles */

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: var(--font-family-heading);
    color: var(
        --color-text-heading,
        var(--color-text-secondary)
    ); /* Fallback to --color-text-secondary if --color-text-heading isn't defined */
}

body,
html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: var(--font-family-body);
    background-color: var(--color-background-primary);
    color: var(--color-text-primary);
}

/* Global hr style */
hr {
    border: none;
    border-top: 1px solid var(--color-border-primary);
    margin: 0.5rem 0;
}

/* Scrollbar styling */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--color-overlay-medium);
}

::-webkit-scrollbar-thumb {
    background-color: var(--color-border-primary);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-text-secondary);
}

/* --- Global Helper Classes --- */

/* A reusable class for elements that should look and act like links,
   and the global style for all real <a> tags. */
.link-button,
a[href] {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    font-family: inherit;
    color: var(--color-text-link);
    text-decoration: none;
    border-bottom: 1px dotted var(--color-text-link);
    text-align: left;
}

.link-button:hover,
.link-button:focus,
a[href]:hover {
    text-decoration: underline;
    outline: none;
}

/* A reusable class for muted, italicized text, like "No results found" */
.text-muted {
    color: var(--color-text-secondary);
    font-style: italic;
}

/* A reusable class for centering text */
.text-center {
    text-align: center;
}

/* --- Global Error Box Style --- */
/* This is the single source of truth for error messages, whether they
   are generated by the Rust backend or the ErrorBox.svelte component. */
.error-box {
    border: 1px solid var(--color-border-error);
    border-radius: var(--radius-base);
    padding: 0.75rem;
    margin-bottom: 1rem;
    background-color: var(--color-background-error);
    color: var(--color-text-error);
    font-family: var(--font-mono);
    font-size: 0.9rem;
}

.error-box strong {
    display: block;
    margin-bottom: 0.25rem;
}

/* --- Shared Form Elements --- */

/* Standard Text Input */
.form-input {
    background: var(--color-background-secondary);
    border: 1px solid var(--color-border-primary);
    color: var(--color-text-primary);
    padding: 0.6rem;
    border-radius: 6px;
    font-size: 0.95rem;
    width: 100%;
    box-sizing: border-box;
    font-family: inherit;
    transition:
        border-color 0.2s,
        box-shadow 0.2s;
}

.form-input:focus {
    outline: 2px solid var(--color-accent-primary);
    outline-offset: -1px;
}

/* Standard Dropdown Select */
.dropdown-select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: var(--select-arrow);
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 1.2em;
    width: 100%;
    padding: 0.5rem;
    padding-right: 2.5rem; /* Space for the arrow */
    font-family: inherit;
    font-size: 1rem;
    border: 1px solid var(--color-border-primary);
    background-color: var(--color-background-secondary);
    color: var(--color-text-primary);
    border-radius: 6px;
    box-sizing: border-box;
    cursor: pointer;
    transition:
        border-color 0.2s,
        box-shadow 0.2s;
}

.dropdown-select:focus {
    outline: none;
    border-color: var(--color-accent-primary);
}

/* Standard Dropdown / Popup Menu Container */
.dropdown-menu {
    background: var(--color-background-secondary);
    border: 1px solid var(--color-border-primary);
    border-radius: 6px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
    z-index: 9999;
    overflow-y: auto;
    padding: 0;
    margin: 0;
}

/* Global Reset for Lists inside Dropdowns */
.dropdown-menu ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

/* Standard Dropdown Items (Buttons) */
.dropdown-menu button {
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    padding: 0.5rem 0.8rem;
    cursor: pointer;
    color: var(--color-text-primary);
    font-size: 0.9rem;
    display: block;
    transition: background-color 0.1s ease;
}

/* State: Navigation Highlight (Hover or Arrow Keys) */
.dropdown-menu button.highlighted,
.dropdown-menu button:hover {
    background-color: var(--color-accent-primary);
    color: var(--color-background-primary); /* Contrast text against accent */
}

/* State: Selected / Active Value (e.g. checkmark state) */
.dropdown-menu button.selected {
    font-weight: bold;
    /* Use tertiary background to distinguish 'chosen' from 'hovering' */
    background-color: var(--color-background-tertiary);
    color: var(--color-text-primary);
}

/* Ghost / Icon Button */
.icon-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.25rem;
    color: var(--color-text-secondary);
    transition:
        color 0.2s,
        opacity 0.2s,
        background-color 0.2s;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    opacity: 0.7;
}

.icon-btn:hover:not(:disabled) {
    color: var(--color-text-primary);
    opacity: 1;
    background-color: var(--color-overlay-light);
}

.icon-btn:disabled {
    opacity: 0.3;
    cursor: default;
}

.icon-btn.danger:hover {
    color: var(--color-text-error);
    background-color: var(--color-background-error);
}

/* Standard Tag Pill */
.tag-pill {
    background-color: var(--color-background-tertiary);
    border: 1px solid var(--color-border-primary);
    color: var(--color-text-primary);
    padding: 0.2rem 0.6rem;
    border-radius: 99px;
    font-size: 0.85rem;
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    transition:
        all 0.2s ease-in-out,
        transform 0.1s;
}

/* Global Tag Remove Button Style (nested within tag-pill) */
.tag-pill .tag-remove {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    font-size: 1.1rem;
    line-height: 0.8;
    color: var(--color-text-secondary);
    margin-left: 0.1rem;
}

.tag-pill .tag-remove:hover {
    color: var(--color-text-error);
}

/* --- Sortable Card Pattern (for Editors) --- */
.sortable-card {
    display: flex;
    background: var(--color-background-tertiary);
    border: 1px solid var(--color-border-primary);
    border-radius: 8px;
    margin-bottom: 0.75rem;
    overflow: visible; /* Visible by default for dropdowns */
}

.sortable-card.has-error {
    border-color: var(--color-border-error);
    background-color: var(--color-background-error);
}

.sortable-handle {
    background: var(--color-background-secondary);
    border-right: 1px solid var(--color-border-primary);
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 0.25rem;
}

.sortable-content {
    flex-grow: 1;
    padding: 0.75rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    min-width: 0;
}
