@import "./fonts.css";

/* --- Root Variables (Default Light Theme / Parchment) --- */
:root {
    /* Typography */
    --font-family-body: "IM Fell English", serif;
    --font-family-heading: "Uncial Antiqua", cursive;
    --font-mono: "IBM Plex Mono", monospace;

    /* Colors */
    --color-background-primary: #fdf6e3;
    --color-background-secondary: #e6dcc9;
    --color-background-tertiary: #dcd3c3;
    --color-text-primary: #4a3f35;
    --color-text-secondary: #6a5f55;
    --color-text-heading: var(--color-text-secondary);
    --color-border-primary: #d3c7b3;
    --color-accent-primary: var(--color-background-tertiary);

    /* Semantic Colors */
    --color-text-link: #2563eb;
    --color-text-link-broken: #b04a4a;
    --color-text-error: #8b0000; /* darkred */
    --color-background-error: rgba(139, 0, 0, 0.1);
    --color-border-error: rgba(139, 0, 0, 0.2);

    /* UI Element Colors */
    --color-overlay-subtle: rgba(0, 0, 0, 0.02);
    --color-overlay-light: rgba(0, 0, 0, 0.03);
    --color-overlay-medium: rgba(0, 0, 0, 0.05);
    --color-overlay-dark: rgba(0, 0, 0, 0.07);
    --color-overlay-resizer: var(--color-overlay-subtle);
    --color-overlay-resizer-hover: var(--color-overlay-dark);

    /* UI Geometry */
    --radius-base: 4px;
    --select-arrow: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");

    /* --- SYNTAX HIGHLIGHTING (Default / Parchment) --- */
    --code-tag: #005f6a; /* Deep Teal Ink */
    --code-attribute: #a0522d; /* Sienna (Warm Brown) */
    --code-string: #556b2f; /* Dark Olive Green */
    --code-background-inline: var(--color-background-secondary);
}

/* --- Dark Mode Theme --- */
[data-theme="dark"] {
    --color-background-primary: #2a2a2e; /* Dark slate background */
    --color-background-secondary: #3a3a3e;
    --color-background-tertiary: #4a4a4e;
    --color-text-primary: #e0e0e0; /* Light chalk text */
    --color-text-secondary: #a0a0a0;
    --color-border-primary: #444448;
    --color-accent-primary: var(--color-background-tertiary);

    --color-text-link: #60a5fa; /* Lighter blue for links */
    --color-text-link-broken: #fca5a5; /* Lighter red */
    --color-text-error: #ef4444; /* Bright red */
    --color-background-error: rgba(239, 68, 68, 0.1);
    --color-border-error: rgba(239, 68, 68, 0.2);

    --color-overlay-subtle: rgba(255, 255, 255, 0.02);
    --color-overlay-light: rgba(255, 255, 255, 0.03);
    --color-overlay-medium: rgba(255, 255, 255, 0.05);
    --color-overlay-dark: rgba(255, 255, 255, 0.07);

    /* Syntax Highlighting */
    --code-tag: #da70d6; /* Orchid/Amethyst (Purple stands out from Gold) */
    --code-attribute: #00ced1; /* Dark Turquoise (Gemstone Blue) */
    --code-string: #adff2f; /* Green-Yellow (Peridot - distinct brightness) */
}

[data-theme="burgundy"] {
    /* Keep the base parchment colors */
    --color-accent-primary: #8c2d2d; /* A deep burgundy for accents */
    --color-text-heading: #8c2d2d; /* Deep Burgundy */
    --font-family-heading: "Cinzel", serif;
}

[data-theme="slate-and-gold"] {
    /* Dark theme */
    --color-background-primary: #2a2a2e; /* Dark slate background */
    --color-background-secondary: #3a3a3e;
    --color-background-tertiary: #4a4a4e;
    --color-text-primary: #e0e0e0; /* Light chalk text */
    --color-text-secondary: #a0a0a0;
    --color-border-primary: #444448;

    --color-text-link: #60a5fa; /* Lighter blue for links */
    --color-text-link-broken: #fca5a5; /* Lighter red */
    --color-text-error: #ef4444; /* Bright red */
    --color-background-error: rgba(239, 68, 68, 0.1);
    --color-border-error: rgba(239, 68, 68, 0.2);

    --color-overlay-subtle: rgba(255, 255, 255, 0.02);
    --color-overlay-light: rgba(255, 255, 255, 0.03);
    --color-overlay-medium: rgba(255, 255, 255, 0.05);
    --color-overlay-dark: rgba(255, 255, 255, 0.07);

    /* Gold theme */
    --font-family-heading: "Cinzel", serif;
    --color-text-heading: #c5b358; /* A warm, desaturated gold */
    --color-accent-primary: #c5b358;

    /* Syntax Highlighting */
    --code-tag: #da70d6; /* Orchid/Amethyst (Purple stands out from Gold) */
    --code-attribute: #00ced1; /* Dark Turquoise (Gemstone Blue) */
    --code-string: #adff2f; /* Green-Yellow (Peridot - distinct brightness) */
}

/* --- Sci-Fi Hologram Theme --- */
[data-theme="hologram"] {
    --color-background-primary: #020a1f; /* Deep space blue */
    --color-background-secondary: #0d275a;
    --color-background-tertiary: #1a3a7a;
    --color-text-primary: #00fbfd; /* Glowing cyan */
    --color-text-secondary: #00a8aa;
    --color-border-primary: #1a568c;
    --color-accent-primary: var(--color-background-tertiary);

    --color-text-link: #39ff14; /* Neon green */
    --color-text-link-broken: #fffb00; /* Deep amber */
    --color-text-error: #ff5555; /* Glowing red */
    --color-background-error: rgba(255, 85, 85, 0.1);
    --color-border-error: rgba(255, 85, 85, 0.2);

    --color-overlay-subtle: rgba(0, 251, 253, 0.03);
    --color-overlay-light: rgba(0, 251, 253, 0.05);
    --color-overlay-medium: rgba(0, 251, 253, 0.07);
    --color-overlay-dark: rgba(0, 251, 253, 0.1);

    /* Syntax Highlighting */
    --code-tag: #d542ff;
    --code-attribute: #ffe600;
    --code-string: #ff5e78;
}

[data-theme="professional"] {
    /* --- Colors (Clean & Professional Palette) --- */
    --color-background-primary: #ffffff; /* Clean white background */
    --color-background-secondary: #f8f9fa; /* Very light grey for side panels */
    --color-background-tertiary: #e9ecef; /* Light grey for hover/active states */
    --color-text-primary: #212529; /* Dark charcoal for main text */
    --color-text-secondary: #6c757d; /* Muted grey for secondary text */
    --color-text-heading: var(
        --color-text-primary
    ); /* Headings use the main text color for a clean look */
    --color-border-primary: #dee2e6; /* Subtle border color */
    --color-accent-primary: #0d6efd; /* A professional blue for accents */

    /* --- Semantic Colors --- */
    --color-text-link: var(--color-accent-primary);
    /* Links use the accent color */
    --color-text-link-broken: #dc3545; /* A standard, clear red for broken links */
    --color-text-error: #dc3545; /* Standard "danger" red */
    --color-background-error: rgba(220, 53, 69, 0.1);
    --color-border-error: rgba(220, 53, 69, 0.2);

    /* Syntax Highlighting (Professional) */
    /* Concept: "GitHub Light" style. Clean and familiar. */
    --code-tag: #e45649; /* Soft Red */
    --code-attribute: #0184bc; /* Cerulean Blue (Crisp) */
    --code-string: #50a14f; /* Vivid Green */
}

/* Global Styles */

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: var(--font-family-heading);
    color: var(
        --color-text-heading,
        var(--color-text-secondary)
    ); /* Fallback to --color-text-secondary if --color-text-heading isn't defined */
}

body,
html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: var(--font-family-body);
    background-color: var(--color-background-primary);
    color: var(--color-text-primary);
}

/* Scrollbar styling */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--color-overlay-medium);
}

::-webkit-scrollbar-thumb {
    background-color: var(--color-border-primary);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-text-secondary);
}

/* --- Global Helper Classes --- */

/* A reusable class for elements that should look and act like links,
   and the global style for all real <a> tags. */
.link-button,
a[href] {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    font-family: inherit;
    color: var(--color-text-link);
    text-decoration: none;
    border-bottom: 1px dotted var(--color-text-link);
    text-align: left;
}

.link-button:hover,
.link-button:focus,
a[href]:hover {
    text-decoration: underline;
    outline: none;
}

/* A reusable class for muted, italicized text, like "No results found" */
.text-muted {
    color: var(--color-text-secondary);
    font-style: italic;
}

/* A reusable class for centering text */
.text-center {
    text-align: center;
}

/* --- Global Internal Link Styles --- */
a.internal-link {
    color: var(--color-text-link);
    text-decoration: none;
    border-bottom: 1px dotted var(--color-text-link);
    cursor: pointer;
}

a.internal-link.broken {
    color: var(--color-text-link-broken);
    text-decoration: none;
    border-bottom: 1px dotted var(--color-text-link-broken);
    cursor: pointer;
}

/* --- Global Spoiler Styles --- */
span.spoiler {
    background-color: var(--color-overlay-dark);
    color: transparent;
    cursor: pointer;
    padding: 0 0.2em;
    border-radius: 3px;
    transition:
        background-color 0.1s ease-in-out,
        color 0.1s ease-in-out;
}

span.spoiler:hover {
    background-color: var(--color-overlay-medium);
}

span.spoiler.revealed {
    background-color: transparent;
    color: inherit;
    cursor: text;
}

/* --- Nested Spoiler Styles --- */
/* This specifically targets links inside a hidden spoiler to make them transparent. */
span.spoiler a.internal-link,
span.spoiler a.internal-link.broken {
    color: transparent;
    border-bottom-color: transparent;
}

/* When the spoiler is revealed, restore the link's original colors. */
span.spoiler.revealed a.internal-link {
    color: var(--color-text-link);
    border-bottom-color: var(--color-text-link);
}
span.spoiler.revealed a.internal-link.broken {
    color: var(--color-text-link-broken);
    border-bottom-color: var(--color-text-link-broken);
}

/* --- Global Styles for Rendered Content --- */
/* These styles apply to HTML elements generated by the Rust Markdown renderer. */

/* --- Insert/Navbox Styles --- */
.insert-container {
    border: 1px solid var(--color-border-primary);
    border-left-width: 3px;
    border-left-color: var(--color-accent-primary); /* Use an accent color */
    border-radius: var(--radius-base);
    margin: 1.5rem 0;
    margin-left: 1rem; /* Indents the entire block */
    padding-left: 0.5rem; /* Adds a little space inside the border */
    overflow: hidden;
    transition:
        background-color 0.2s ease,
        border-color 0.2s ease;
    box-shadow: 0 2px 8px var(--color-overlay-subtle);
}

.insert-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0.75rem;
    background-color: var(--color-background-secondary);
    border-bottom: 1px solid var(--color-border-primary);
    font-weight: 600;
}

.insert-title-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.insert-title-wrapper.centered {
    flex: 1;
    justify-content: center;
}

.insert-toggle {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.8rem;
    font-family: var(--font-mono);
    padding: 0.25rem;
}

.insert-toggle:hover {
    color: var(--color-text-secondary);
}

.insert-content {
    padding: 0.75rem;
    transition: all 0.2s ease-in-out;
}

/* Style for the collapsed state */
.insert-container.collapsed {
    background-color: transparent;
    box-shadow: none;
    border-color: transparent;
    border-left-color: transparent;
    padding-left: 0;
}

.insert-container.collapsed .insert-header {
    border: 1px solid var(--color-border-primary);
    background-color: var(--color-background-secondary);
    border-radius: var(--radius-base);
    cursor: pointer;
}

.insert-container.collapsed .insert-header:hover {
    background-color: var(--color-background-secondary);
    border-color: var(--color-accent-primary);
}

.insert-container.collapsed .insert-content {
    display: none;
}

/* --- Global Error Box Style --- */
/* This is the single source of truth for error messages, whether they
   are generated by the Rust backend or the ErrorBox.svelte component. */
.error-box {
    border: 1px solid var(--color-border-error);
    border-radius: var(--radius-base);
    padding: 0.75rem;
    margin-bottom: 1rem;
    background-color: var(--color-background-error);
    color: var(--color-text-error);
    font-family: var(--font-mono);
    font-size: 0.9rem;
}

.error-box strong {
    display: block;
    margin-bottom: 0.25rem;
}

.footnote-definition p {
    display: inline;
    margin-left: 0.5em;
}
